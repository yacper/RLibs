/********************************************************************
    created:	2016/8/18 11:44:52
    author:		rush
    email:		
	
    purpose:	
*********************************************************************/
syntax = "proto2";
package DataModel;

import "Protos/CommonDm.proto";
import "Protos/Neo/NeoCommon.proto";
import "google/protobuf/timestamp.proto";



message CompanyProfileDM
{
    required uint64     Id = 1;
    required uint64     SecurityId = 2;
    optional string     Symbol =3;

    optional string     Description =4;

    optional string     Cusip = 6;
    optional string     Sedol = 7;
    optional string     Isin =8;
    optional string     Cik =9;

    optional google.protobuf.Timestamp   Ipo = 10;
    optional string     Address = 11;
    optional string     City =12;
    optional string     Phone =13;
    optional ECountry   Country =14;
    optional string     State =15;
    optional string     Weburl =16;
    optional string     Logo =17;
    optional double     EmployeeTotal =19;
    optional string     GicsCode =20;               // gics code
    optional google.protobuf.Timestamp     UpdatedAt =21;               // 

    optional double     ShareOutstanding =25;       // 
    optional double     MarketCapitalization =26;
}

message CompanyExecutiveDM
{
    required uint64     Id = 1;
    required uint64     SecurityId = 2;
    optional string     Symbol =3;

    optional string     Position =5;
    optional double      Age =6;
    optional ESex       Sex =7;
    optional double      Since =8;

    optional ECurrency  Currency = 9;
    optional double     Compensation = 10;
}

message CompanyOwnershipDM
{
    required uint64     Id = 1;
    required uint64     SecurityId = 2;
    optional string     Symbol =3;

    optional string     Name =5;
    optional double     Share =6;
    optional double     Change = 7;

    optional google.protobuf.Timestamp FilingDate =8;
}

message  BalanceSheetDM
{
    required uint64     Id = 1;
    required uint64     SecurityId = 2;
    optional string     Symbol =3;

    optional bool   IsYearly =4;                                            // 是否是年报
    optional double Year =5;
    optional double Quater =6;
    optional string Form  = 7;

    optional google.protobuf.Timestamp Date = 9;

    optional google.protobuf.Timestamp StartDate =10;
    optional google.protobuf.Timestamp EndDate =11;
    optional google.protobuf.Timestamp FiledDate =12;
    optional google.protobuf.Timestamp AcceptedDate =13;

    /// 资产
    // current 流动资产
    optional double CashAndCashEquivalents = 20;                // 现金及现金等价物
    optional double ShortTermInvestments = 21;                  // 短期投资
    optional double NetReceivables = 22;                        // 净应收款
    optional double Inventory = 23;                             // 存货
    optional double OtherCurrentAssets = 25;                    // 其他流动资产

    optional double TotalCurrentAssets = 39;                    // 总流动资产

    // noncurrent  非流动资产
    optional double LongTermInvestments = 41;                    // 长期投资
    optional double PropertyPlantAndEquipmentNet = 42;           // eod 该数据项有问题
    optional double OtherNoncurrentAssets = 43;                  // 其他非流动资产

    optional double TotalNoncurrentAssets = 68;                  // 总非流动资产

    // 总资产
    optional double TotalAssets = 69;                            // 总资产


    /// 负债
    // 流动负债
    optional double AccountsPayable = 70;                            // 应付账款
    optional double ShortTermDebt = 71;                                     // 短期债务
    optional double OtherLiabilitiesCurrent = 72;                           // 其他流动负债
//    optional double ContractWithCustomerLiabilityCurrent = 72;              // 应付账款
//    optional double CommercialPaper = 73;                                   // 商业票据

    optional double TotalLiabilitiesCurrent = 89;                           // 总流动负债

    // 非流动负债
    optional double LongTermDebt = 90;                                      // 长期非流动负债
    optional double OtherLiabilitiesNoncurrent = 91;                        // 其他非流动负债

    optional double TotalLiabilitiesNoncurrent = 98;                        // 总非流动负债

    optional double TotalLiabilities = 99;                                  // 总负债

    // 股东权益
    optional double CommonStock = 110;                  // 普通股和额外实收资本
    optional double RetainedEarnings = 111;             // 留存收益
    optional double OtherStockholderEquity = 113;       // 其他股东权益
    optional double TotalStockholderEquity = 114;       // 股东权益总和 
    optional double LiabilitiesAndStockholdersEquity = 115;     // 总负债和股东权益
}


message  CashFlowDM
{
    required uint64     Id = 1;
    required uint64     SecurityId = 2;
    optional string     Symbol =3;

    optional bool   IsYearly =4;                                            // 是否是年报
    required double Year =5;
    optional double Quater =6;
    optional string Form  = 7;

    optional google.protobuf.Timestamp Date = 9;

    optional google.protobuf.Timestamp StartDate =10;
    optional google.protobuf.Timestamp EndDate =11;
    optional google.protobuf.Timestamp FiledDate =12;
    optional google.protobuf.Timestamp AcceptedDate =13;

    /// 经营活动
    optional double TotalCashFromOperatingActivities = 30;      //持续经营活动现金净额
    optional double NetIncome = 31;                             // 持续经营净收入
//    optional double ChangeToNetincome = 32;                   //
    optional double Depreciation = 33;                          //折旧摊销
    optional double OtherNonCashItems = 34;                     //其他非现金项目
    optional double ChangeInWorkingCapital = 36;                //营运资金变动
    optional double     ChangeReceivables = 37;                     //应收款项（增）减
    optional double     ChangeToInventory = 40;                     //存货（增）减

    /// 投资活动
    optional double TotalCashflowsFromInvestingActivities = 50;      //持续投资活动现金净额
    optional double Investments = 51;      //投资产品交易的净现金流
    optional double OtherCashflowsFromInvestingActivities = 52;      //
    optional double CapitalExpenditures = 53;      //  (-)资本支出/固定资产交易的净现金流

    /// 融资活动
    optional double TotalCashFromFinancingActivities = 60;      //持续融资活动现金净额
    optional double NetBorrowings = 61;                         //债务发行/偿还的净现金流
    optional double DividendsPaid = 62;                         //支付股息
    optional double SalePurchaseOfStock = 63;                         //股份回购
    optional double OtherCashflowsFromFinancingActivities = 64;        //其他融资活动的净现金流额

    // end cash PosiTion
    optional double BeginPeriodCashFlow = 70;        //期初现金流
    optional double ChangeInCash = 71;        //当期现金流变化
    optional double EndPeriodCashFlow = 72;        //期末现金流

    optional double FreeCashFlow = 75;        //自由现金流

}

message  IncomeStatementDM
{
    required uint64     Id = 1;
    required uint64     SecurityId = 2;
    optional string     Symbol =3;

    optional bool   IsYearly =4;                                            // 是否是年报
    required double Year =5;
    optional double Quater =6;
    optional string Form  = 7;

    optional google.protobuf.Timestamp Date = 9;

    optional google.protobuf.Timestamp StartDate =10;
    optional google.protobuf.Timestamp EndDate =11;
    optional google.protobuf.Timestamp FiledDate =12;
    optional google.protobuf.Timestamp AcceptedDate =13;


    optional double TotalRevenue        = 20;                   // 总收入
    optional double CostOfRevenue       = 22;                   // 收入成本 
    optional double GrossProfit         = 23;                   // 毛利润 = TotalRevenue - CostOfRevenue

    optional double TotalOperatingExpenses     = 30;            // 总营业费用
    optional double     SellingGeneralAndAdministrative = 31;      // 市场、销售和管理费用
    optional double     ResearchAndDevelopment = 32;               // 研发费用 
    optional double     NonRecurring     = 33;                      // 一次性费用
    optional double     OtherOperatingExpenses     = 34;            // 其他营业费用

    optional double ReconciledDepreciation = 80;     //                   调整折旧

    optional double OperatingIncome     = 40;                   // 营业收入
    optional double NetNonoperatingIncomeExpense = 131;     // 其他净非营业收入/支出

    optional double NetInterestIncome   = 60;     //        净利息收入
    optional double     InterestIncome  = 61;     //        利息收入
    optional double     InterestExpense = 62;     //        利息支出


    optional double IncomeTaxExpense    = 70;     //        所得税
    optional double TaxProvision        = 71;     //        备付所得税
    optional double IncomeBeforeTax     = 72;     //        税前收入


    optional double NetIncome = 50;     // 净收入

    optional double MinorityInterest = 81;     //                  少数股权

    optional double Ebit = 91;      //                      少数股权
    optional double Ebitda = 92;    //                      少数股权
}

enum EHolderType
{
    EHolderType_Unknown     = 0;
    EHolderType_Institution = 1;        // 机构
    EHolderType_Fund        = 2;        // 基金
}

message HolderDM
{
    required uint64         Id = 1;
    required uint64         SecurityId = 2;
    optional string         Symbol =3;
    optional EHolderType    HolderType =4;

    optional int64         Key = 5;
    optional string         Name =6;
    optional google.protobuf.Timestamp Date =7;

    optional double         TotalShares     = 8;
    optional double         TotalAssets     = 9;
    optional double         CurrentShares   = 10;
    optional double         Change          = 11;
    optional double         Change_p        = 12;
}

message InsiderTransactionDM
{
    required uint64         Id = 1;
    required uint64         SecurityId = 2;
    optional string         Symbol =3;

    optional int64         Key = 5;
    optional google.protobuf.Timestamp Date =6;
    optional string         OwnerName       =7;
    optional string         OwnerCik        =8;

    optional google.protobuf.Timestamp TransactionDate      = 10;
    optional string         TransactionCode                 = 11;
    optional double         TransactionAmount               = 12;
    optional double         TransactionPrice                = 13;
    optional string         TransactionAcquiredDisposed     = 14;
    optional double         PostTransactionAmount           = 15;
    optional string         SecLink                         = 16;
}